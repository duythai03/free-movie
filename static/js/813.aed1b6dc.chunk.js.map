{"version":3,"file":"static/js/813.aed1b6dc.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/media-captions/dist/prod/index.js"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","const ParseErrorCode = {\n  LoadFail: 0,\n  BadSignature: 1,\n  BadTimestamp: 2,\n  BadSettingValue: 3,\n  BadFormat: 4,\n  UnknownSetting: 5\n};\nclass ParseError extends Error {\n  code;\n  line;\n  constructor(init) {\n    super(init.reason);\n    this.code = init.code;\n    this.line = init.line;\n  }\n}\n\nconst LINE_TERMINATOR_RE = /\\r?\\n|\\r/gm;\nclass TextLineTransformStream {\n  writable;\n  readable;\n  constructor(encoding) {\n    const transformer = new TextStreamLineIterator(encoding);\n    this.writable = new WritableStream({\n      write(chunk) {\n        transformer.transform(chunk);\n      },\n      close() {\n        transformer.close();\n      }\n    });\n    this.readable = new ReadableStream({\n      start(controller) {\n        transformer.onLine = (line) => controller.enqueue(line);\n        transformer.onClose = () => controller.close();\n      }\n    });\n  }\n}\nclass TextStreamLineIterator {\n  x = \"\";\n  y;\n  onLine;\n  onClose;\n  constructor(encoding) {\n    this.y = new TextDecoder(encoding);\n  }\n  transform(chunk) {\n    this.x += this.y.decode(chunk, { stream: true });\n    const lines = this.x.split(LINE_TERMINATOR_RE);\n    this.x = lines.pop() || \"\";\n    for (let i = 0; i < lines.length; i++)\n      this.onLine(lines[i].trim());\n  }\n  close() {\n    if (this.x)\n      this.onLine(this.x.trim());\n    this.x = \"\";\n    this.onClose();\n  }\n}\n\nasync function parseText(text, options) {\n  const stream = new ReadableStream({\n    start(controller) {\n      const lines = text.split(LINE_TERMINATOR_RE);\n      for (const line of lines)\n        controller.enqueue(line);\n      controller.close();\n    }\n  });\n  return parseTextStream(stream, options);\n}\nasync function parseTextStream(stream, options) {\n  const type = options?.type ?? \"vtt\";\n  let factory;\n  if (typeof type === \"string\") {\n    switch (type) {\n      case \"srt\":\n        factory = (await import('./srt-parser.js')).default;\n        break;\n      case \"ssa\":\n      case \"ass\":\n        factory = (await import('./ssa-parser.js')).default;\n        break;\n      default:\n        factory = (await Promise.resolve().then(function () { return vttParser; })).default;\n    }\n  } else {\n    factory = type;\n  }\n  let result;\n  const reader = stream.getReader(), parser = factory(), errors = !!options?.strict || !!options?.errors;\n  await parser.init({\n    strict: false,\n    ...options,\n    errors,\n    type,\n    cancel() {\n      reader.cancel();\n      result = parser.done(true);\n    }\n  });\n  let i = 1;\n  while (true) {\n    const { value, done } = await reader.read();\n    if (done) {\n      parser.parse(\"\", i);\n      result = parser.done(false);\n      break;\n    }\n    parser.parse(value, i);\n    i++;\n  }\n  return result;\n}\n\nasync function parseResponse(response, options) {\n  const res = await response;\n  if (!res.ok || !res.body) {\n    let error;\n    return {\n      metadata: {},\n      cues: [],\n      regions: [],\n      errors: [error]\n    };\n  }\n  const contentType = res.headers.get(\"content-type\") || \"\", type = contentType.match(/text\\/(.*?)(?:;|$)/)?.[1], encoding = contentType.match(/charset=(.*?)(?:;|$)/)?.[1];\n  return parseByteStream(res.body, { type, encoding, ...options });\n}\nasync function parseByteStream(stream, { encoding = \"utf-8\", ...options } = {}) {\n  const textStream = stream.pipeThrough(new TextLineTransformStream(encoding));\n  return parseTextStream(textStream, options);\n}\n\nclass TextCue extends EventTarget {\n  /**\n   * A string that identifies the cue.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/id}\n   */\n  id = \"\";\n  /**\n   * A `double` that represents the video time that the cue will start being displayed, in seconds.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/startTime}\n   */\n  startTime;\n  /**\n   * A `double` that represents the video time that the cue will stop being displayed, in seconds.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/endTime}\n   */\n  endTime;\n  /**\n   * Returns a string with the contents of the cue.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/text}\n   */\n  text;\n  /**\n   * A `boolean` for whether the video will pause when this cue stops being displayed.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/pauseOnExit}\n   */\n  pauseOnExit = false;\n  constructor(startTime, endTime, text) {\n    super();\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.text = text;\n  }\n  addEventListener(type, listener, options) {\n    super.addEventListener(type, listener, options);\n  }\n  removeEventListener(type, listener, options) {\n    super.removeEventListener(type, listener, options);\n  }\n}\n\nconst IS_SERVER = typeof document === \"undefined\";\n\nconst CueBase = IS_SERVER ? TextCue : window.VTTCue;\nclass VTTCue extends CueBase {\n  /**\n   * A `VTTRegion` object describing the video's sub-region that the cue will be drawn onto,\n   * or `null` if none is assigned.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/region}\n   */\n  region = null;\n  /**\n   * The cue writing direction.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/vertical}\n   */\n  vertical = \"\";\n  /**\n   * Returns `true` if the `VTTCue.line` attribute is an integer number of lines or a percentage\n   * of the video size.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/snapToLines}\n   */\n  snapToLines = true;\n  /**\n   * Returns the line positioning of the cue. This can be the string `'auto'` or a number whose\n   * interpretation depends on the value of `VTTCue.snapToLines`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/line}\n   */\n  line = \"auto\";\n  /**\n   * Returns an enum representing the alignment of the `VTTCue.line`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/lineAlign}\n   */\n  lineAlign = \"start\";\n  /**\n   * Returns the indentation of the cue within the line. This can be the string `'auto'` or a\n   * number representing the percentage of the `VTTCue.region`, or the video size if `VTTCue`.region`\n   * is `null`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/position}\n   */\n  position = \"auto\";\n  /**\n   * Returns an enum representing the alignment of the cue. This is used to determine what\n   * the `VTTCue.position` is anchored to. The default is `'auto'`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/positionAlign}\n   */\n  positionAlign = \"auto\";\n  /**\n   * Returns a double representing the size of the cue, as a percentage of the video size.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/size}\n   */\n  size = 100;\n  /**\n   * Returns an enum representing the alignment of all the lines of text within the cue box.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/align}\n   */\n  align = \"center\";\n  /**\n   * Additional styles associated with the cue.\n   */\n  style;\n}\n\nclass VTTRegion {\n  /**\n   * A string that identifies the region.\n   */\n  id = \"\";\n  /**\n   * A `double` representing the width of the region, as a percentage of the video.\n   */\n  width = 100;\n  /**\n   * A `double` representing the height of the region, in number of lines.\n   */\n  lines = 3;\n  /**\n   * A `double` representing the region anchor X offset, as a percentage of the region.\n   */\n  regionAnchorX = 0;\n  /**\n   * A `double` representing the region anchor Y offset, as a percentage of the region.\n   */\n  regionAnchorY = 100;\n  /**\n   * A `double` representing the viewport anchor X offset, as a percentage of the video.\n   */\n  viewportAnchorX = 0;\n  /**\n   * A `double` representing the viewport anchor Y offset, as a percentage of the video.\n   */\n  viewportAnchorY = 100;\n  /**\n   * An enum representing how adding new cues will move existing cues.\n   */\n  scroll = \"\";\n}\n\nconst COMMA$1 = \",\", PERCENT_SIGN$1 = \"%\";\nfunction toNumber(text) {\n  const num = parseInt(text, 10);\n  return !Number.isNaN(num) ? num : null;\n}\nfunction toPercentage(text) {\n  const num = parseInt(text.replace(PERCENT_SIGN$1, \"\"), 10);\n  return !Number.isNaN(num) && num >= 0 && num <= 100 ? num : null;\n}\nfunction toCoords(text) {\n  if (!text.includes(COMMA$1))\n    return null;\n  const [x, y] = text.split(COMMA$1).map(toPercentage);\n  return x !== null && y !== null ? [x, y] : null;\n}\nfunction toFloat(text) {\n  const num = parseFloat(text);\n  return !Number.isNaN(num) ? num : null;\n}\n\nconst HEADER_MAGIC = \"WEBVTT\", COMMA = \",\", PERCENT_SIGN = \"%\", SETTING_SEP_RE = /[:=]/, SETTING_LINE_RE = /^[\\s\\t]*(region|vertical|line|position|size|align)[:=]/, NOTE_BLOCK_START = \"NOTE\", REGION_BLOCK_START = \"REGION\", REGION_BLOCK_START_RE = /^REGION:?[\\s\\t]+/, SPACE_RE = /[\\s\\t]+/, TIMESTAMP_SEP = \"-->\", TIMESTAMP_SEP_RE = /[\\s\\t]*-->[\\s\\t]+/, ALIGN_RE = /start|center|end|left|right/, LINE_ALIGN_RE = /start|center|end/, POS_ALIGN_RE = /line-(?:left|right)|center|auto/, TIMESTAMP_RE = /^(?:(\\d{1,2}):)?(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?$/;\nvar VTTBlock = /* @__PURE__ */ ((VTTBlock2) => {\n  VTTBlock2[VTTBlock2[\"None\"] = 0] = \"None\";\n  VTTBlock2[VTTBlock2[\"Header\"] = 1] = \"Header\";\n  VTTBlock2[VTTBlock2[\"Cue\"] = 2] = \"Cue\";\n  VTTBlock2[VTTBlock2[\"Region\"] = 3] = \"Region\";\n  VTTBlock2[VTTBlock2[\"Note\"] = 4] = \"Note\";\n  return VTTBlock2;\n})(VTTBlock || {});\nclass VTTParser {\n  f;\n  c = 0;\n  g = {};\n  h = {};\n  j = [];\n  a = null;\n  b = null;\n  k = [];\n  d;\n  l = \"\";\n  async init(init) {\n    this.f = init;\n    if (init.strict)\n      this.c = 1;\n    if (init.errors)\n      this.d = (await import('./errors.js')).ParseErrorBuilder;\n  }\n  parse(line, lineCount) {\n    if (line === \"\") {\n      if (this.a) {\n        this.j.push(this.a);\n        this.f.onCue?.(this.a);\n        this.a = null;\n      } else if (this.b) {\n        this.h[this.b.id] = this.b;\n        this.f.onRegion?.(this.b);\n        this.b = null;\n      } else if (this.c === 1) {\n        this.i(line, lineCount);\n        this.f.onHeaderMetadata?.(this.g);\n      }\n      this.c = 0;\n    } else if (this.c) {\n      switch (this.c) {\n        case 1:\n          this.i(line, lineCount);\n          break;\n        case 2:\n          if (this.a) {\n            const hasText = this.a.text.length > 0;\n            if (!hasText && SETTING_LINE_RE.test(line)) {\n              this.m(line.split(SPACE_RE), lineCount);\n            } else {\n              this.a.text += (hasText ? \"\\n\" : \"\") + line;\n            }\n          }\n          break;\n        case 3:\n          this.n(line.split(SPACE_RE), lineCount);\n          break;\n      }\n    } else if (line.startsWith(NOTE_BLOCK_START)) {\n      this.c = 4;\n    } else if (line.startsWith(REGION_BLOCK_START)) {\n      this.c = 3;\n      this.b = new VTTRegion();\n      this.n(line.replace(REGION_BLOCK_START_RE, \"\").split(SPACE_RE), lineCount);\n    } else if (line.includes(TIMESTAMP_SEP)) {\n      const result = this.o(line, lineCount);\n      if (result) {\n        this.a = new VTTCue(result[0], result[1], \"\");\n        this.a.id = this.l;\n        this.m(result[2], lineCount);\n      }\n      this.c = 2;\n    } else if (lineCount === 1) {\n      this.i(line, lineCount);\n    }\n    this.l = line;\n  }\n  done() {\n    return {\n      metadata: this.g,\n      cues: this.j,\n      regions: Object.values(this.h),\n      errors: this.k\n    };\n  }\n  i(line, lineCount) {\n    if (lineCount > 1) {\n      if (SETTING_SEP_RE.test(line)) {\n        const [key, value] = line.split(SETTING_SEP_RE);\n        if (key)\n          this.g[key] = (value || \"\").replace(SPACE_RE, \"\");\n      }\n    } else if (line.startsWith(HEADER_MAGIC)) {\n      this.c = 1;\n    } else {\n      this.e(this.d?.p());\n    }\n  }\n  o(line, lineCount) {\n    const [startTimeText, trailingText = \"\"] = line.split(TIMESTAMP_SEP_RE), [endTimeText, ...settingsText] = trailingText.split(SPACE_RE), startTime = parseVTTTimestamp(startTimeText), endTime = parseVTTTimestamp(endTimeText);\n    if (startTime !== null && endTime !== null && endTime > startTime) {\n      return [startTime, endTime, settingsText];\n    } else {\n      if (startTime === null) {\n        this.e(this.d?.q(startTimeText, lineCount));\n      }\n      if (endTime === null) {\n        this.e(this.d?.r(endTimeText, lineCount));\n      }\n      if (startTime != null && endTime !== null && endTime > startTime) {\n        this.e(this.d?.s(startTime, endTime, lineCount));\n      }\n    }\n  }\n  /**\n   * @see {@link https://www.w3.org/TR/webvtt1/#region-settings-parsing}\n   */\n  n(settings, line) {\n    let badValue;\n    for (let i = 0; i < settings.length; i++) {\n      if (SETTING_SEP_RE.test(settings[i])) {\n        badValue = false;\n        const [name, value] = settings[i].split(SETTING_SEP_RE);\n        switch (name) {\n          case \"id\":\n            this.b.id = value;\n            break;\n          case \"width\":\n            const width = toPercentage(value);\n            if (width !== null)\n              this.b.width = width;\n            else\n              badValue = true;\n            break;\n          case \"lines\":\n            const lines = toNumber(value);\n            if (lines !== null)\n              this.b.lines = lines;\n            else\n              badValue = true;\n            break;\n          case \"regionanchor\":\n            const region = toCoords(value);\n            if (region !== null) {\n              this.b.regionAnchorX = region[0];\n              this.b.regionAnchorY = region[1];\n            } else\n              badValue = true;\n            break;\n          case \"viewportanchor\":\n            const viewport = toCoords(value);\n            if (viewport !== null) {\n              this.b.viewportAnchorX = viewport[0];\n              this.b.viewportAnchorY = viewport[1];\n            } else\n              badValue = true;\n            break;\n          case \"scroll\":\n            if (value === \"up\")\n              this.b.scroll = \"up\";\n            else\n              badValue = true;\n            break;\n          default:\n            this.e(this.d?.t(name, value, line));\n        }\n        if (badValue) {\n          this.e(this.d?.u(name, value, line));\n        }\n      }\n    }\n  }\n  /**\n   * @see {@link https://www.w3.org/TR/webvtt1/#cue-timings-and-settings-parsing}\n   */\n  m(settings, line) {\n    let badValue;\n    for (let i = 0; i < settings.length; i++) {\n      badValue = false;\n      if (SETTING_SEP_RE.test(settings[i])) {\n        const [name, value] = settings[i].split(SETTING_SEP_RE);\n        switch (name) {\n          case \"region\":\n            const region = this.h[value];\n            if (region)\n              this.a.region = region;\n            break;\n          case \"vertical\":\n            if (value === \"lr\" || value === \"rl\") {\n              this.a.vertical = value;\n              this.a.region = null;\n            } else\n              badValue = true;\n            break;\n          case \"line\":\n            const [linePos, lineAlign] = value.split(COMMA);\n            if (linePos.includes(PERCENT_SIGN)) {\n              const percentage = toPercentage(linePos);\n              if (percentage !== null) {\n                this.a.line = percentage;\n                this.a.snapToLines = false;\n              } else\n                badValue = true;\n            } else {\n              const number = toFloat(linePos);\n              if (number !== null)\n                this.a.line = number;\n              else\n                badValue = true;\n            }\n            if (LINE_ALIGN_RE.test(lineAlign)) {\n              this.a.lineAlign = lineAlign;\n            } else if (lineAlign) {\n              badValue = true;\n            }\n            if (this.a.line !== \"auto\")\n              this.a.region = null;\n            break;\n          case \"position\":\n            const [colPos, colAlign] = value.split(COMMA), position = toPercentage(colPos);\n            if (position !== null)\n              this.a.position = position;\n            else\n              badValue = true;\n            if (colAlign && POS_ALIGN_RE.test(colAlign)) {\n              this.a.positionAlign = colAlign;\n            } else if (colAlign) {\n              badValue = true;\n            }\n            break;\n          case \"size\":\n            const size = toPercentage(value);\n            if (size !== null) {\n              this.a.size = size;\n              if (size < 100)\n                this.a.region = null;\n            } else {\n              badValue = true;\n            }\n            break;\n          case \"align\":\n            if (ALIGN_RE.test(value)) {\n              this.a.align = value;\n            } else {\n              badValue = true;\n            }\n            break;\n          default:\n            this.e(this.d?.v(name, value, line));\n        }\n        if (badValue) {\n          this.e(this.d?.w(name, value, line));\n        }\n      }\n    }\n  }\n  e(error) {\n    if (!error)\n      return;\n    this.k.push(error);\n    if (this.f.strict) {\n      this.f.cancel();\n      throw error;\n    } else {\n      this.f.onError?.(error);\n    }\n  }\n}\nfunction parseVTTTimestamp(timestamp) {\n  const match = timestamp.match(TIMESTAMP_RE);\n  if (!match)\n    return null;\n  const hours = match[1] ? parseInt(match[1], 10) : 0, minutes = parseInt(match[2], 10), seconds = parseInt(match[3], 10), milliseconds = match[4] ? parseInt(match[4].padEnd(3, \"0\"), 10) : 0, total = hours * 3600 + minutes * 60 + seconds + milliseconds / 1e3;\n  if (hours < 0 || minutes < 0 || seconds < 0 || milliseconds < 0 || minutes > 59 || seconds > 59) {\n    return null;\n  }\n  return total;\n}\nfunction createVTTParser() {\n  return new VTTParser();\n}\n\nvar vttParser = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  VTTBlock: VTTBlock,\n  VTTParser: VTTParser,\n  default: createVTTParser,\n  parseVTTTimestamp: parseVTTTimestamp\n});\n\nconst DIGIT_RE = /[0-9]/, MULTI_SPACE_RE = /[\\s\\t]+/, TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\",\n  timestamp: \"span\"\n}, HTML_ENTITIES = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&quot;\": '\"',\n  \"&#39;\": \"'\",\n  \"&nbsp;\": \"\\xA0\",\n  \"&lrm;\": \"\\u200E\",\n  \"&rlm;\": \"\\u200F\"\n}, HTML_ENTITY_RE = /&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g, COLORS = /* @__PURE__ */ new Set([\n  \"white\",\n  \"lime\",\n  \"cyan\",\n  \"red\",\n  \"yellow\",\n  \"magenta\",\n  \"blue\",\n  \"black\"\n]), BLOCK_TYPES = /* @__PURE__ */ new Set(Object.keys(TAG_NAME));\nfunction tokenizeVTTCue(cue) {\n  let buffer = \"\", mode = 1, result = [], stack = [], node;\n  for (let i = 0; i < cue.text.length; i++) {\n    const char = cue.text[i];\n    switch (mode) {\n      case 1:\n        if (char === \"<\") {\n          addText();\n          mode = 2;\n        } else {\n          buffer += char;\n        }\n        break;\n      case 2:\n        switch (char) {\n          case \"\\n\":\n          case \"\t\":\n          case \" \":\n            addNode();\n            mode = 4;\n            break;\n          case \".\":\n            addNode();\n            mode = 3;\n            break;\n          case \"/\":\n            mode = 5;\n            break;\n          case \">\":\n            addNode();\n            mode = 1;\n            break;\n          default:\n            if (!buffer && DIGIT_RE.test(char))\n              mode = 6;\n            buffer += char;\n            break;\n        }\n        break;\n      case 3:\n        switch (char) {\n          case \"\t\":\n          case \" \":\n          case \"\\n\":\n            addClass();\n            if (node)\n              node.class?.trim();\n            mode = 4;\n            break;\n          case \".\":\n            addClass();\n            break;\n          case \">\":\n            addClass();\n            if (node)\n              node.class?.trim();\n            mode = 1;\n            break;\n          default:\n            buffer += char;\n        }\n        break;\n      case 4:\n        if (char === \">\") {\n          buffer = buffer.replace(MULTI_SPACE_RE, \" \");\n          if (node?.type === \"v\")\n            node.voice = replaceHTMLEntities(buffer);\n          else if (node?.type === \"lang\")\n            node.lang = replaceHTMLEntities(buffer);\n          buffer = \"\";\n          mode = 1;\n        } else {\n          buffer += char;\n        }\n        break;\n      case 5:\n        if (char === \">\") {\n          buffer = \"\";\n          node = stack.pop();\n          mode = 1;\n        }\n        break;\n      case 6:\n        if (char === \">\") {\n          const time = parseVTTTimestamp(buffer);\n          if (time !== null && time >= cue.startTime && time <= cue.endTime) {\n            buffer = \"timestamp\";\n            addNode();\n            node.time = time;\n          }\n          buffer = \"\";\n          mode = 1;\n        } else {\n          buffer += char;\n        }\n        break;\n    }\n  }\n  function addNode() {\n    if (BLOCK_TYPES.has(buffer)) {\n      const parent = node;\n      node = createBlockNode(buffer);\n      if (parent) {\n        if (stack[stack.length - 1] !== parent)\n          stack.push(parent);\n        parent.children.push(node);\n      } else\n        result.push(node);\n    }\n    buffer = \"\";\n    mode = 1;\n  }\n  function addClass() {\n    if (node && buffer) {\n      const color = buffer.replace(\"bg_\", \"\");\n      if (COLORS.has(color)) {\n        node[buffer.startsWith(\"bg_\") ? \"bgColor\" : \"color\"] = color;\n      } else {\n        node.class = !node.class ? buffer : node.class + \" \" + buffer;\n      }\n    }\n    buffer = \"\";\n  }\n  function addText() {\n    if (!buffer)\n      return;\n    const text = { type: \"text\", data: replaceHTMLEntities(buffer) };\n    node ? node.children.push(text) : result.push(text);\n    buffer = \"\";\n  }\n  if (mode === 1)\n    addText();\n  return result;\n}\nfunction createBlockNode(type) {\n  return {\n    tagName: TAG_NAME[type],\n    type,\n    children: []\n  };\n}\nfunction replaceHTMLEntities(text) {\n  return text.replace(HTML_ENTITY_RE, (entity) => HTML_ENTITIES[entity] || \"'\");\n}\n\nfunction setCSSVar(el, name, value) {\n  el.style.setProperty(`--${name}`, value + \"\");\n}\nfunction setDataAttr(el, name, value = true) {\n  el.setAttribute(`data-${name}`, value === true ? \"\" : value + \"\");\n}\nfunction setPartAttr(el, name) {\n  el.setAttribute(\"data-part\", name);\n}\nfunction getLineHeight(el) {\n  return parseFloat(getComputedStyle(el).lineHeight) || 0;\n}\n\nfunction createVTTCueTemplate(cue) {\n  if (IS_SERVER) {\n    throw Error(\n      \"[media-captions] called `createVTTCueTemplate` on the server - use `renderVTTCueString`\"\n    );\n  }\n  const template = document.createElement(\"template\");\n  template.innerHTML = renderVTTCueString(cue);\n  return { cue, content: template.content };\n}\nfunction renderVTTCueString(cue, currentTime = 0) {\n  return renderVTTTokensString(tokenizeVTTCue(cue), currentTime);\n}\nfunction renderVTTTokensString(tokens, currentTime = 0) {\n  let attrs, result = \"\";\n  for (const token of tokens) {\n    if (token.type === \"text\") {\n      result += token.data;\n    } else {\n      const isTimestamp = token.type === \"timestamp\";\n      attrs = {};\n      attrs.class = token.class;\n      attrs.title = token.type === \"v\" && token.voice;\n      attrs.lang = token.type === \"lang\" && token.lang;\n      attrs[\"data-part\"] = token.type === \"v\" && \"voice\";\n      if (isTimestamp) {\n        attrs[\"data-part\"] = \"timed\";\n        attrs[\"data-time\"] = token.time;\n        attrs[\"data-future\"] = token.time > currentTime;\n        attrs[\"data-past\"] = token.time < currentTime;\n      }\n      attrs.style = `${token.color ? `color: ${token.color};` : \"\"}${token.bgColor ? `background-color: ${token.bgColor};` : \"\"}`;\n      const attributes = Object.entries(attrs).filter((v) => v[1]).map((v) => `${v[0]}=\"${v[1] === true ? \"\" : v[1]}\"`).join(\" \");\n      result += `<${token.tagName}${attributes ? \" \" + attributes : \"\"}>${renderVTTTokensString(\n        token.children\n      )}</${token.tagName}>`;\n    }\n  }\n  return result;\n}\nfunction updateTimedVTTCueNodes(root, currentTime) {\n  if (IS_SERVER)\n    return;\n  for (const el of root.querySelectorAll('[data-part=\"timed\"]')) {\n    const time = Number(el.getAttribute(\"data-time\"));\n    if (Number.isNaN(time))\n      continue;\n    if (time > currentTime)\n      setDataAttr(el, \"future\");\n    else\n      el.removeAttribute(\"data-future\");\n    if (time < currentTime)\n      setDataAttr(el, \"past\");\n    else\n      el.removeAttribute(\"data-past\");\n  }\n}\n\nfunction debounce(fn, delay) {\n  let timeout = null, args;\n  function run() {\n    clear();\n    fn(...args);\n    args = void 0;\n  }\n  function clear() {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n  function debounce2() {\n    args = [].slice.call(arguments);\n    clear();\n    timeout = setTimeout(run, delay);\n  }\n  return debounce2;\n}\n\nconst STARTING_BOX = Symbol(0);\nfunction createBox(box) {\n  if (box instanceof HTMLElement) {\n    return {\n      top: box.offsetTop,\n      width: box.clientWidth,\n      height: box.clientHeight,\n      left: box.offsetLeft,\n      right: box.offsetLeft + box.clientWidth,\n      bottom: box.offsetTop + box.clientHeight\n    };\n  }\n  return { ...box };\n}\nfunction moveBox(box, axis, delta) {\n  switch (axis) {\n    case \"+x\":\n      box.left += delta;\n      box.right += delta;\n      break;\n    case \"-x\":\n      box.left -= delta;\n      box.right -= delta;\n      break;\n    case \"+y\":\n      box.top += delta;\n      box.bottom += delta;\n      break;\n    case \"-y\":\n      box.top -= delta;\n      box.bottom -= delta;\n      break;\n  }\n}\nfunction isBoxCollision(a, b) {\n  return a.left <= b.right && a.right >= b.left && a.top <= b.bottom && a.bottom >= b.top;\n}\nfunction isAnyBoxCollision(box, boxes) {\n  for (let i = 0; i < boxes.length; i++)\n    if (isBoxCollision(box, boxes[i]))\n      return boxes[i];\n  return null;\n}\nfunction isWithinBox(container, box) {\n  return box.top >= 0 && box.bottom <= container.height && box.left >= 0 && box.right <= container.width;\n}\nfunction isBoxOutOfBounds(container, box, axis) {\n  switch (axis) {\n    case \"+x\":\n      return box.left < 0;\n    case \"-x\":\n      return box.right > container.width;\n    case \"+y\":\n      return box.top < 0;\n    case \"-y\":\n      return box.bottom > container.height;\n  }\n}\nfunction calcBoxIntersectPercentage(container, box) {\n  const x = Math.max(0, Math.min(container.width, box.right) - Math.max(0, box.left)), y = Math.max(0, Math.min(container.height, box.bottom) - Math.max(0, box.top)), intersectArea = x * y;\n  return intersectArea / (container.height * container.width);\n}\nfunction createCSSBox(container, box) {\n  return {\n    top: box.top / container.height,\n    left: box.left / container.width,\n    right: (container.width - box.right) / container.width,\n    bottom: (container.height - box.bottom) / container.height\n  };\n}\nfunction resolveRelativeBox(container, box) {\n  box.top = box.top * container.height;\n  box.left = box.left * container.width;\n  box.right = container.width - box.right * container.width;\n  box.bottom = container.height - box.bottom * container.height;\n  return box;\n}\nconst BOX_SIDES = [\"top\", \"left\", \"right\", \"bottom\"];\nfunction setBoxCSSVars(el, container, box, prefix) {\n  const cssBox = createCSSBox(container, box);\n  for (const side of BOX_SIDES) {\n    setCSSVar(el, `${prefix}-${side}`, cssBox[side] * 100 + \"%\");\n  }\n}\nfunction avoidBoxCollisions(container, box, boxes, axis) {\n  let percentage = 1, positionedBox, startBox = { ...box };\n  for (let i = 0; i < axis.length; i++) {\n    while (isBoxOutOfBounds(container, box, axis[i]) || isWithinBox(container, box) && isAnyBoxCollision(box, boxes)) {\n      moveBox(box, axis[i], 1);\n    }\n    if (isWithinBox(container, box))\n      return box;\n    const intersection = calcBoxIntersectPercentage(container, box);\n    if (percentage > intersection) {\n      positionedBox = { ...box };\n      percentage = intersection;\n    }\n    box = { ...startBox };\n  }\n  return positionedBox || startBox;\n}\n\nconst POSITION_OVERRIDE = Symbol(0);\nfunction positionCue(container, cue, displayEl, boxes) {\n  let cueEl = displayEl.firstElementChild, line = computeCueLine(cue), displayBox, axis = [];\n  if (!displayEl[STARTING_BOX]) {\n    displayEl[STARTING_BOX] = createStartingBox(container, displayEl);\n  }\n  displayBox = resolveRelativeBox(container, { ...displayEl[STARTING_BOX] });\n  if (displayEl[POSITION_OVERRIDE]) {\n    axis = [displayEl[POSITION_OVERRIDE] === \"top\" ? \"+y\" : \"-y\", \"+x\", \"-x\"];\n  } else if (cue.snapToLines) {\n    let size;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n    let step = getLineHeight(cueEl), position = step * Math.round(line), maxPosition = container[size] + step, initialAxis = axis[0];\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n    if (line < 0) {\n      position += cue.vertical === \"\" ? container.height : container.width;\n      axis = axis.reverse();\n    }\n    moveBox(displayBox, initialAxis, position);\n  } else {\n    const isHorizontal = cue.vertical === \"\", posAxis = isHorizontal ? \"+y\" : \"+x\", size = isHorizontal ? displayBox.height : displayBox.width;\n    moveBox(\n      displayBox,\n      posAxis,\n      (isHorizontal ? container.height : container.width) * line / 100\n    );\n    moveBox(\n      displayBox,\n      posAxis,\n      cue.lineAlign === \"center\" ? size / 2 : cue.lineAlign === \"end\" ? size : 0\n    );\n    axis = isHorizontal ? [\"-y\", \"+y\", \"-x\", \"+x\"] : [\"-x\", \"+x\", \"-y\", \"+y\"];\n  }\n  displayBox = avoidBoxCollisions(container, displayBox, boxes, axis);\n  setBoxCSSVars(displayEl, container, displayBox, \"cue\");\n  return displayBox;\n}\nfunction createStartingBox(container, cueEl) {\n  const box = createBox(cueEl), pos = getStyledPositions(cueEl);\n  cueEl[POSITION_OVERRIDE] = false;\n  if (pos.top) {\n    box.top = pos.top;\n    box.bottom = pos.top + box.height;\n    cueEl[POSITION_OVERRIDE] = \"top\";\n  }\n  if (pos.bottom) {\n    const bottom = container.height - pos.bottom;\n    box.top = bottom - box.height;\n    box.bottom = bottom;\n    cueEl[POSITION_OVERRIDE] = \"bottom\";\n  }\n  if (pos.left)\n    box.left = pos.left;\n  if (pos.right)\n    box.right = container.width - pos.right;\n  return createCSSBox(container, box);\n}\nfunction getStyledPositions(el) {\n  const positions = {};\n  for (const side of BOX_SIDES) {\n    positions[side] = parseFloat(el.style.getPropertyValue(`--cue-${side}`));\n  }\n  return positions;\n}\nfunction computeCueLine(cue) {\n  if (cue.line === \"auto\") {\n    if (!cue.snapToLines) {\n      return 100;\n    } else {\n      return -1;\n    }\n  }\n  return cue.line;\n}\nfunction computeCuePosition(cue) {\n  if (cue.position === \"auto\") {\n    switch (cue.align) {\n      case \"start\":\n      case \"left\":\n        return 0;\n      case \"right\":\n      case \"end\":\n        return 100;\n      default:\n        return 50;\n    }\n  }\n  return cue.position;\n}\nfunction computeCuePositionAlignment(cue, dir) {\n  if (cue.positionAlign === \"auto\") {\n    switch (cue.align) {\n      case \"start\":\n        return dir === \"ltr\" ? \"line-left\" : \"line-right\";\n      case \"end\":\n        return dir === \"ltr\" ? \"line-right\" : \"line-left\";\n      case \"center\":\n        return \"center\";\n      default:\n        return `line-${cue.align}`;\n    }\n  }\n  return cue.positionAlign;\n}\n\nconst REGION_AXIS = [\"-y\", \"+y\", \"-x\", \"+x\"];\nfunction positionRegion(container, region, regionEl, boxes) {\n  let cues = Array.from(regionEl.querySelectorAll('[data-part=\"cue-display\"]')), height = 0, limit = Math.max(0, cues.length - region.lines);\n  for (let i = cues.length - 1; i >= limit; i--) {\n    height += cues[i].offsetHeight;\n  }\n  setCSSVar(regionEl, \"region-height\", height + \"px\");\n  if (!regionEl[STARTING_BOX]) {\n    regionEl[STARTING_BOX] = createCSSBox(container, createBox(regionEl));\n  }\n  let box = { ...regionEl[STARTING_BOX] };\n  box = resolveRelativeBox(container, box);\n  box.width = regionEl.clientWidth;\n  box.height = height;\n  box.right = box.left + box.width;\n  box.bottom = box.top + height;\n  box = avoidBoxCollisions(container, box, boxes, REGION_AXIS);\n  setBoxCSSVars(regionEl, container, box, \"region\");\n  return box;\n}\n\nclass CaptionsRenderer {\n  overlay;\n  z;\n  A = 0;\n  C = \"ltr\";\n  B = [];\n  D = false;\n  E;\n  h = /* @__PURE__ */ new Map();\n  j = /* @__PURE__ */ new Map();\n  /* Text direction. */\n  get dir() {\n    return this.C;\n  }\n  set dir(dir) {\n    this.C = dir;\n    setDataAttr(this.overlay, \"dir\", dir);\n  }\n  get currentTime() {\n    return this.A;\n  }\n  set currentTime(time) {\n    this.A = time;\n    this.update();\n  }\n  constructor(overlay, init) {\n    this.overlay = overlay;\n    this.dir = init?.dir ?? \"ltr\";\n    overlay.setAttribute(\"translate\", \"yes\");\n    overlay.setAttribute(\"aria-live\", \"off\");\n    overlay.setAttribute(\"aria-atomic\", \"true\");\n    setPartAttr(overlay, \"captions\");\n    this.G();\n    this.E = new ResizeObserver(this.I.bind(this));\n    this.E.observe(overlay);\n  }\n  changeTrack({ regions, cues }) {\n    this.reset();\n    this.J(regions);\n    for (const cue of cues)\n      this.j.set(cue, null);\n    this.update();\n  }\n  addCue(cue) {\n    this.j.set(cue, null);\n    this.update();\n  }\n  removeCue(cue) {\n    this.j.delete(cue);\n    this.update();\n  }\n  update(forceUpdate = false) {\n    this.H(forceUpdate);\n  }\n  reset() {\n    this.j.clear();\n    this.h.clear();\n    this.B = [];\n    this.overlay.textContent = \"\";\n  }\n  destroy() {\n    this.reset();\n    this.E.disconnect();\n  }\n  I() {\n    this.D = true;\n    this.K();\n  }\n  K = debounce(() => {\n    this.D = false;\n    this.G();\n    for (const el of this.h.values()) {\n      el[STARTING_BOX] = null;\n    }\n    for (const el of this.j.values()) {\n      if (el)\n        el[STARTING_BOX] = null;\n    }\n    this.H(true);\n  }, 50);\n  G() {\n    this.z = createBox(this.overlay);\n    setCSSVar(this.overlay, \"overlay-width\", this.z.width + \"px\");\n    setCSSVar(this.overlay, \"overlay-height\", this.z.height + \"px\");\n  }\n  H(forceUpdate = false) {\n    if (!this.j.size || this.D)\n      return;\n    let cue, activeCues = [...this.j.keys()].filter((cue2) => this.A >= cue2.startTime && this.A <= cue2.endTime).sort(\n      (cueA, cueB) => cueA.startTime !== cueB.startTime ? cueA.startTime - cueB.startTime : cueA.endTime - cueB.endTime\n    ), activeRegions = activeCues.map((cue2) => cue2.region);\n    for (let i = 0; i < this.B.length; i++) {\n      cue = this.B[i];\n      if (activeCues[i] === cue)\n        continue;\n      if (cue.region && !activeRegions.includes(cue.region)) {\n        const regionEl = this.h.get(cue.region.id);\n        if (regionEl) {\n          regionEl.removeAttribute(\"data-active\");\n          forceUpdate = true;\n        }\n      }\n      const cueEl = this.j.get(cue);\n      if (cueEl) {\n        cueEl.remove();\n        forceUpdate = true;\n      }\n    }\n    for (let i = 0; i < activeCues.length; i++) {\n      cue = activeCues[i];\n      let cueEl = this.j.get(cue);\n      if (!cueEl)\n        this.j.set(cue, cueEl = this.L(cue));\n      const regionEl = this.F(cue) && this.h.get(cue.region.id);\n      if (regionEl && !regionEl.hasAttribute(\"data-active\")) {\n        requestAnimationFrame(() => setDataAttr(regionEl, \"active\"));\n        forceUpdate = true;\n      }\n      if (!cueEl.isConnected) {\n        (regionEl || this.overlay).append(cueEl);\n        forceUpdate = true;\n      }\n    }\n    if (forceUpdate) {\n      const boxes = [], seen = /* @__PURE__ */ new Set();\n      for (let i = activeCues.length - 1; i >= 0; i--) {\n        cue = activeCues[i];\n        if (seen.has(cue.region || cue))\n          continue;\n        const isRegion = this.F(cue), el = isRegion ? this.h.get(cue.region.id) : this.j.get(cue);\n        if (isRegion) {\n          boxes.push(positionRegion(this.z, cue.region, el, boxes));\n        } else {\n          boxes.push(positionCue(this.z, cue, el, boxes));\n        }\n        seen.add(isRegion ? cue.region : cue);\n      }\n    }\n    updateTimedVTTCueNodes(this.overlay, this.A);\n    this.B = activeCues;\n  }\n  J(regions) {\n    if (!regions)\n      return;\n    for (const region of regions) {\n      const el = this.M(region);\n      this.h.set(region.id, el);\n      this.overlay.append(el);\n    }\n  }\n  M(region) {\n    const el = document.createElement(\"div\");\n    setPartAttr(el, \"region\");\n    setDataAttr(el, \"id\", region.id);\n    setDataAttr(el, \"scroll\", region.scroll);\n    setCSSVar(el, \"region-width\", region.width + \"%\");\n    setCSSVar(el, \"region-anchor-x\", region.regionAnchorX);\n    setCSSVar(el, \"region-anchor-y\", region.regionAnchorY);\n    setCSSVar(el, \"region-viewport-anchor-x\", region.viewportAnchorX);\n    setCSSVar(el, \"region-viewport-anchor-y\", region.viewportAnchorY);\n    setCSSVar(el, \"region-lines\", region.lines);\n    return el;\n  }\n  L(cue) {\n    const display = document.createElement(\"div\"), position = computeCuePosition(cue), positionAlignment = computeCuePositionAlignment(cue, this.C);\n    setPartAttr(display, \"cue-display\");\n    if (cue.vertical !== \"\")\n      setDataAttr(display, \"vertical\");\n    setCSSVar(display, \"cue-text-align\", cue.align);\n    if (cue.style) {\n      for (const prop of Object.keys(cue.style)) {\n        display.style.setProperty(prop, cue.style[prop]);\n      }\n    }\n    if (!this.F(cue)) {\n      setCSSVar(\n        display,\n        \"cue-writing-mode\",\n        cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\"\n      );\n      if (!cue.style?.[\"--cue-width\"]) {\n        let maxSize = position;\n        if (positionAlignment === \"line-left\") {\n          maxSize = 100 - position;\n        } else if (positionAlignment === \"center\" && position <= 50) {\n          maxSize = position * 2;\n        } else if (positionAlignment === \"center\" && position > 50) {\n          maxSize = (100 - position) * 2;\n        }\n        const size = cue.size < maxSize ? cue.size : maxSize;\n        if (cue.vertical === \"\")\n          setCSSVar(display, \"cue-width\", size + \"%\");\n        else\n          setCSSVar(display, \"cue-height\", size + \"%\");\n      }\n    } else {\n      setCSSVar(\n        display,\n        \"cue-offset\",\n        `${position - (positionAlignment === \"line-right\" ? 100 : positionAlignment === \"center\" ? 50 : 0)}%`\n      );\n    }\n    const el = document.createElement(\"div\");\n    setPartAttr(el, \"cue\");\n    if (cue.id)\n      setDataAttr(el, \"id\", cue.id);\n    el.innerHTML = renderVTTCueString(cue);\n    display.append(el);\n    return display;\n  }\n  F(cue) {\n    return cue.region && cue.size === 100 && cue.vertical === \"\" && cue.line === \"auto\";\n  }\n}\n\nexport { CaptionsRenderer as C, ParseError as P, TextCue as T, VTTParser as V, VTTBlock as a, VTTCue as b, ParseErrorCode as c, parseResponse as d, parseByteStream as e, parseText as f, parseTextStream as g, VTTRegion as h, createVTTCueTemplate as i, renderVTTTokensString as j, parseVTTTimestamp as p, renderVTTCueString as r, tokenizeVTTCue as t, updateTimedVTTCueNodes as u };\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","TypeError","String","Number","_defineProperty","Object","defineProperty","value","enumerable","configurable","writable","ParseErrorCode","LoadFail","BadSignature","BadTimestamp","BadSettingValue","BadFormat","UnknownSetting","ParseError","Error","init","super","reason","this","code","line","LINE_TERMINATOR_RE","TextLineTransformStream","encoding","transformer","TextStreamLineIterator","WritableStream","write","chunk","transform","close","readable","ReadableStream","start","controller","onLine","enqueue","onClose","y","TextDecoder","x","decode","stream","lines","split","pop","length","trim","async","parseText","text","options","parseTextStream","_options$type","type","factory","result","default","Promise","resolve","then","vttParser","reader","getReader","parser","errors","strict","cancel","done","read","parse","parseResponse","response","_contentType$match","_contentType$match2","res","ok","body","error","metadata","cues","regions","contentType","headers","get","match","parseByteStream","arguments","undefined","pipeThrough","TextCue","EventTarget","startTime","endTime","addEventListener","listener","removeEventListener","IS_SERVER","document","CueBase","window","VTTCue","VTTRegion","PERCENT_SIGN$1","toNumber","num","parseInt","isNaN","toPercentage","replace","toCoords","includes","map","toFloat","parseFloat","SETTING_SEP_RE","SETTING_LINE_RE","REGION_BLOCK_START_RE","SPACE_RE","TIMESTAMP_SEP_RE","ALIGN_RE","LINE_ALIGN_RE","POS_ALIGN_RE","TIMESTAMP_RE","VTTBlock","VTTBlock2","VTTParser","f","c","d","ParseErrorBuilder","lineCount","_this$f$onCue","_this$f","a","j","push","onCue","b","_this$f$onRegion","_this$f2","h","id","onRegion","_this$f$onHeaderMetad","_this$f3","onHeaderMetadata","g","hasText","test","m","n","startsWith","l","values","k","key","_this$d","p","startTimeText","trailingText","endTimeText","settingsText","parseVTTTimestamp","_this$d2","_this$d3","_this$d4","q","s","settings","_this$d5","badValue","name","width","region","regionAnchorX","regionAnchorY","viewport","viewportAnchorX","viewportAnchorY","scroll","_this$d6","u","_this$d7","vertical","linePos","lineAlign","percentage","snapToLines","number","colPos","colAlign","position","positionAlign","size","align","v","_this$d8","w","_this$f$onError","_this$f4","onError","timestamp","hours","minutes","seconds","milliseconds","padEnd","freeze","__proto__","DIGIT_RE","MULTI_SPACE_RE","TAG_NAME","ruby","rt","lang","HTML_ENTITIES","HTML_ENTITY_RE","COLORS","Set","BLOCK_TYPES","keys","tokenizeVTTCue","cue","_node$class","_node$class2","node","buffer","mode","stack","char","addText","addNode","addClass","class","_node","_node2","voice","replaceHTMLEntities","time","has","parent","tagName","children","color","data","entity","setCSSVar","el","style","setProperty","concat","setDataAttr","setAttribute","setPartAttr","createVTTCueTemplate","template","createElement","innerHTML","renderVTTCueString","content","currentTime","renderVTTTokensString","tokens","attrs","token","isTimestamp","title","bgColor","attributes","entries","filter","join","updateTimedVTTCueNodes","root","querySelectorAll","getAttribute","removeAttribute","STARTING_BOX","createBox","box","HTMLElement","top","offsetTop","clientWidth","height","clientHeight","left","offsetLeft","right","bottom","moveBox","axis","delta","isAnyBoxCollision","boxes","isWithinBox","container","isBoxOutOfBounds","calcBoxIntersectPercentage","Math","max","min","createCSSBox","resolveRelativeBox","BOX_SIDES","setBoxCSSVars","prefix","cssBox","side","avoidBoxCollisions","positionedBox","startBox","intersection","POSITION_OVERRIDE","positionCue","displayEl","displayBox","cueEl","firstElementChild","computeCueLine","pos","positions","getPropertyValue","getStyledPositions","createStartingBox","step","getComputedStyle","lineHeight","round","maxPosition","initialAxis","abs","ceil","reverse","isHorizontal","posAxis","REGION_AXIS","positionRegion","regionEl","Array","from","limit","offsetHeight","CaptionsRenderer","dir","C","overlay","A","update","_init$dir","Map","fn","delay","args","timeout","run","clear","clearTimeout","slice","setTimeout","debounce","D","G","H","E","ResizeObserver","I","bind","observe","changeTrack","_ref","reset","J","set","addCue","removeCue","delete","forceUpdate","B","textContent","destroy","disconnect","K","z","activeCues","cue2","sort","cueA","cueB","activeRegions","remove","L","F","hasAttribute","requestAnimationFrame","isConnected","append","seen","isRegion","add","M","display","computeCuePosition","positionAlignment","computeCuePositionAlignment","prop","_cue$style","maxSize"],"sourceRoot":""}