{"version":3,"file":"static/js/884.5420f37f.chunk.js","mappings":"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","sources":["../node_modules/@vidstack/react/prod/chunks/vidstack-De1yWkSS.js"],"sourcesContent":["\"use client\"\n\nimport { peek, listenEvent, effect, DOMEvent, isString, camelToKebabCase, isUndefined, isFunction } from './vidstack-DcuYVyd0.js';\nimport { QualitySymbol, RAFLoop, TextTrack, TextTrackSymbol, ListSymbol, IS_CHROME, coerceToError, loadScript, VideoProvider, preconnect, isHLSSupported } from './vidstack-Dqbnf1jT.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nconst toDOMEventType = (type) => camelToKebabCase(type);\nclass HLSController {\n  constructor(_video, _ctx) {\n    this.m = _video;\n    this.b = _ctx;\n    this.d = null;\n    this.rb = null;\n    this.sb = {};\n    this.tb = /* @__PURE__ */ new Set();\n  }\n  get instance() {\n    return this.d;\n  }\n  setup(ctor) {\n    const { streamType } = this.b.$state;\n    const isLive = peek(streamType).includes(\"live\"), isLiveLowLatency = peek(streamType).includes(\"ll-\");\n    this.d = new ctor({\n      lowLatencyMode: isLiveLowLatency,\n      backBufferLength: isLiveLowLatency ? 4 : isLive ? 8 : void 0,\n      renderTextTracksNatively: false,\n      ...this.sb\n    });\n    const dispatcher = this.Pi.bind(this);\n    for (const event of Object.values(ctor.Events)) this.d.on(event, dispatcher);\n    this.d.on(ctor.Events.ERROR, this.R.bind(this));\n    for (const callback of this.tb) callback(this.d);\n    this.b.player.dispatch(\"hls-instance\", {\n      detail: this.d\n    });\n    this.d.attachMedia(this.m);\n    this.d.on(ctor.Events.AUDIO_TRACK_SWITCHED, this.Ri.bind(this));\n    this.d.on(ctor.Events.LEVEL_SWITCHED, this.Si.bind(this));\n    this.d.on(ctor.Events.LEVEL_LOADED, this.Ti.bind(this));\n    this.d.on(ctor.Events.NON_NATIVE_TEXT_TRACKS_FOUND, this.Ui.bind(this));\n    this.d.on(ctor.Events.CUES_PARSED, this.Vi.bind(this));\n    this.b.qualities[QualitySymbol.Ja] = this.ke.bind(this);\n    listenEvent(this.b.qualities, \"change\", this.le.bind(this));\n    listenEvent(this.b.audioTracks, \"change\", this.me.bind(this));\n    this.rb = effect(this.ne.bind(this));\n  }\n  ba(type, data) {\n    return new DOMEvent(toDOMEventType(type), { detail: data });\n  }\n  ne() {\n    if (!this.b.$state.live()) return;\n    const raf = new RAFLoop(this.oe.bind(this));\n    raf.Ya();\n    return raf.aa.bind(raf);\n  }\n  oe() {\n    this.b.$state.liveSyncPosition.set(this.d?.liveSyncPosition ?? Infinity);\n  }\n  Pi(type, data) {\n    this.b.player?.dispatch(this.ba(type, data));\n  }\n  Ui(eventType, data) {\n    const event = this.ba(eventType, data);\n    let currentTrack = -1;\n    for (let i = 0; i < data.tracks.length; i++) {\n      const nonNativeTrack = data.tracks[i], init = nonNativeTrack.subtitleTrack ?? nonNativeTrack.closedCaptions, track = new TextTrack({\n        id: `hls-${nonNativeTrack.kind}-${i}`,\n        src: init?.url,\n        label: nonNativeTrack.label,\n        language: init?.lang,\n        kind: nonNativeTrack.kind,\n        default: nonNativeTrack.default\n      });\n      track[TextTrackSymbol.na] = 2;\n      track[TextTrackSymbol.ib] = () => {\n        if (track.mode === \"showing\") {\n          this.d.subtitleTrack = i;\n          currentTrack = i;\n        } else if (currentTrack === i) {\n          this.d.subtitleTrack = -1;\n          currentTrack = -1;\n        }\n      };\n      this.b.textTracks.add(track, event);\n    }\n  }\n  Vi(eventType, data) {\n    const index = this.d?.subtitleTrack, track = this.b.textTracks.getById(`hls-${data.type}-${index}`);\n    if (!track) return;\n    const event = this.ba(eventType, data);\n    for (const cue of data.cues) {\n      cue.positionAlign = \"auto\";\n      track.addCue(cue, event);\n    }\n  }\n  Ri(eventType, data) {\n    const track = this.b.audioTracks[data.id];\n    if (track) {\n      const trigger = this.ba(eventType, data);\n      this.b.audioTracks[ListSymbol.fa](track, true, trigger);\n    }\n  }\n  Si(eventType, data) {\n    const quality = this.b.qualities[data.level];\n    if (quality) {\n      const trigger = this.ba(eventType, data);\n      this.b.qualities[ListSymbol.fa](quality, true, trigger);\n    }\n  }\n  Ti(eventType, data) {\n    if (this.b.$state.canPlay()) return;\n    const { type, live, totalduration: duration, targetduration } = data.details, trigger = this.ba(eventType, data);\n    this.b.delegate.c(\n      \"stream-type-change\",\n      live ? type === \"EVENT\" && Number.isFinite(duration) && targetduration >= 10 ? \"live:dvr\" : \"live\" : \"on-demand\",\n      trigger\n    );\n    this.b.delegate.c(\"duration-change\", duration, trigger);\n    const media = this.d.media;\n    if (this.d.currentLevel === -1) {\n      this.b.qualities[QualitySymbol.Xa](true, trigger);\n    }\n    for (const remoteTrack of this.d.audioTracks) {\n      const localTrack = {\n        id: remoteTrack.id.toString(),\n        label: remoteTrack.name,\n        language: remoteTrack.lang || \"\",\n        kind: \"main\"\n      };\n      this.b.audioTracks[ListSymbol.ea](localTrack, trigger);\n    }\n    for (const level of this.d.levels) {\n      const videoQuality = {\n        id: level.id?.toString() ?? level.height + \"p\",\n        width: level.width,\n        height: level.height,\n        codec: level.codecSet,\n        bitrate: level.bitrate\n      };\n      this.b.qualities[ListSymbol.ea](videoQuality, trigger);\n    }\n    media.dispatchEvent(new DOMEvent(\"canplay\", { trigger }));\n  }\n  R(eventType, data) {\n    if (data.fatal) {\n      switch (data.type) {\n        case \"mediaError\":\n          this.d?.recoverMediaError();\n          break;\n        default:\n          this.rc(data.error);\n          break;\n      }\n    }\n  }\n  rc(error) {\n    this.b.delegate.c(\"error\", {\n      message: error.message,\n      code: 1,\n      error\n    });\n  }\n  ke() {\n    if (this.d) this.d.currentLevel = -1;\n  }\n  le() {\n    const { qualities } = this.b;\n    if (!this.d || qualities.auto) return;\n    this.d[qualities.switch + \"Level\"] = qualities.selectedIndex;\n    if (IS_CHROME) {\n      this.m.currentTime = this.m.currentTime;\n    }\n  }\n  me() {\n    const { audioTracks } = this.b;\n    if (this.d && this.d.audioTrack !== audioTracks.selectedIndex) {\n      this.d.audioTrack = audioTracks.selectedIndex;\n    }\n  }\n  Wi(src) {\n    if (!isString(src.src)) return;\n    this.d?.loadSource(src.src);\n  }\n  Xi() {\n    this.d?.destroy();\n    this.d = null;\n    this.rb?.();\n    this.rb = null;\n  }\n}\n\nclass HLSLibLoader {\n  constructor(_lib, _ctx, _callback) {\n    this.M = _lib;\n    this.b = _ctx;\n    this.Ma = _callback;\n    this.re();\n  }\n  async re() {\n    const callbacks = {\n      onLoadStart: this.Na.bind(this),\n      onLoaded: this.ub.bind(this),\n      onLoadError: this.se.bind(this)\n    };\n    let ctor = await loadHLSScript(this.M, callbacks);\n    if (isUndefined(ctor) && !isString(this.M)) ctor = await importHLS(this.M, callbacks);\n    if (!ctor) return null;\n    if (!ctor.isSupported()) {\n      const message = \"[vidstack] `hls.js` is not supported in this environment\";\n      this.b.player.dispatch(new DOMEvent(\"hls-unsupported\"));\n      this.b.delegate.c(\"error\", { message, code: 4 });\n      return null;\n    }\n    return ctor;\n  }\n  Na() {\n    this.b.player.dispatch(new DOMEvent(\"hls-lib-load-start\"));\n  }\n  ub(ctor) {\n    this.b.player.dispatch(\n      new DOMEvent(\"hls-lib-loaded\", {\n        detail: ctor\n      })\n    );\n    this.Ma(ctor);\n  }\n  se(e) {\n    const error = coerceToError(e);\n    this.b.player.dispatch(\n      new DOMEvent(\"hls-lib-load-error\", {\n        detail: error\n      })\n    );\n    this.b.delegate.c(\"error\", {\n      message: error.message,\n      code: 4,\n      error\n    });\n  }\n}\nasync function importHLS(loader, callbacks = {}) {\n  if (isUndefined(loader)) return void 0;\n  callbacks.onLoadStart?.();\n  if (loader.prototype && loader.prototype !== Function) {\n    callbacks.onLoaded?.(loader);\n    return loader;\n  }\n  try {\n    const ctor = (await loader())?.default;\n    if (ctor && !!ctor.isSupported) {\n      callbacks.onLoaded?.(ctor);\n    } else {\n      throw Error(\n        false ? \"[vidstack] failed importing `hls.js`. Dynamic import returned invalid constructor.\" : \"\"\n      );\n    }\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nasync function loadHLSScript(src, callbacks = {}) {\n  if (!isString(src)) return void 0;\n  callbacks.onLoadStart?.();\n  try {\n    await loadScript(src);\n    if (!isFunction(window.Hls)) {\n      throw Error(\n        false ? \"[vidstack] failed loading `hls.js`. Could not find a valid `Hls` constructor on window\" : \"\"\n      );\n    }\n    const ctor = window.Hls;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\n\nconst JS_DELIVR_CDN = \"https://cdn.jsdelivr.net\";\nclass HLSProvider extends VideoProvider {\n  constructor() {\n    super(...arguments);\n    this.$$PROVIDER_TYPE = \"HLS\";\n    this.sc = null;\n    this.e = new HLSController(this.video, this.b);\n    this.pa = `${JS_DELIVR_CDN}/npm/hls.js@^1.5.0/dist/hls${\".min.js\"}`;\n  }\n  /**\n   * The `hls.js` constructor.\n   */\n  get ctor() {\n    return this.sc;\n  }\n  /**\n   * The current `hls.js` instance.\n   */\n  get instance() {\n    return this.e.instance;\n  }\n  get type() {\n    return \"hls\";\n  }\n  get canLiveSync() {\n    return true;\n  }\n  /**\n   * The `hls.js` configuration object.\n   *\n   * @see {@link https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning}\n   */\n  get config() {\n    return this.e.sb;\n  }\n  set config(config) {\n    this.e.sb = config;\n  }\n  /**\n   * The `hls.js` constructor (supports dynamic imports) or a URL of where it can be found.\n   *\n   * @defaultValue `https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js`\n   */\n  get library() {\n    return this.pa;\n  }\n  set library(library) {\n    this.pa = library;\n  }\n  preconnect() {\n    if (!isString(this.pa)) return;\n    preconnect(this.pa);\n  }\n  setup() {\n    super.setup();\n    new HLSLibLoader(this.pa, this.b, (ctor) => {\n      this.sc = ctor;\n      this.e.setup(ctor);\n      this.b.delegate.c(\"provider-setup\", this);\n      const src = peek(this.b.$state.source);\n      if (src) this.loadSource(src);\n    });\n  }\n  async loadSource(src, preload) {\n    if (!isString(src.src)) {\n      this.pc();\n      return;\n    }\n    this.a.preload = preload || \"\";\n    this.he(src, \"application/x-mpegurl\");\n    this.e.Wi(src);\n    this.L = src;\n  }\n  /**\n   * The given callback is invoked when a new `hls.js` instance is created and right before it's\n   * attached to media.\n   */\n  onInstance(callback) {\n    const instance = this.e.instance;\n    if (instance) callback(instance);\n    this.e.tb.add(callback);\n    return () => this.e.tb.delete(callback);\n  }\n  destroy() {\n    this.e.Xi();\n  }\n}\n/**\n * Whether `hls.js` is supported in this environment.\n */\nHLSProvider.supported = isHLSSupported();\n\nexport { HLSProvider };\n"],"names":["HLSController","constructor","_video","_ctx","this","m","b","d","rb","sb","tb","Set","instance","setup","ctor","streamType","$state","isLive","peek","includes","isLiveLowLatency","lowLatencyMode","backBufferLength","renderTextTracksNatively","dispatcher","Pi","bind","event","Object","values","Events","on","ERROR","R","callback","player","dispatch","detail","attachMedia","AUDIO_TRACK_SWITCHED","Ri","LEVEL_SWITCHED","Si","LEVEL_LOADED","Ti","NON_NATIVE_TEXT_TRACKS_FOUND","Ui","CUES_PARSED","Vi","qualities","QualitySymbol","Ja","ke","listenEvent","le","audioTracks","me","effect","ne","ba","type","data","DOMEvent","camelToKebabCase","toDOMEventType","live","raf","RAFLoop","oe","Ya","aa","_this$d$liveSyncPosit","_this$d","liveSyncPosition","set","Infinity","_this$b$player","eventType","currentTrack","i","tracks","length","_nonNativeTrack$subti","nonNativeTrack","init","subtitleTrack","closedCaptions","track","TextTrack","id","concat","kind","src","url","label","language","lang","default","TextTrackSymbol","na","ib","mode","textTracks","add","_this$d2","index","getById","cue","cues","positionAlign","addCue","trigger","ListSymbol","fa","quality","level","canPlay","totalduration","duration","targetduration","details","delegate","c","Number","isFinite","media","currentLevel","Xa","remoteTrack","localTrack","toString","name","ea","levels","_level$id$toString","_level$id","videoQuality","height","width","codec","codecSet","bitrate","dispatchEvent","_this$d3","fatal","recoverMediaError","rc","error","message","code","auto","switch","selectedIndex","IS_CHROME","currentTime","audioTrack","Wi","_this$d4","isString","loadSource","Xi","_this$d5","_this$rb","destroy","call","HLSLibLoader","_lib","_callback","M","Ma","re","callbacks","onLoadStart","Na","onLoaded","ub","onLoadError","se","async","_callbacks$onLoadStar2","arguments","undefined","_callbacks$onLoaded3","loadScript","isFunction","window","Hls","Error","err","_callbacks$onLoadErro2","loadHLSScript","isUndefined","loader","_callbacks$onLoadStar","prototype","Function","_callbacks$onLoaded","_await$loader","isSupported","_callbacks$onLoaded2","_callbacks$onLoadErro","importHLS","e","coerceToError","HLSProvider","VideoProvider","super","$$PROVIDER_TYPE","sc","video","pa","canLiveSync","config","library","preconnect","source","preload","a","he","L","pc","onInstance","delete","supported","isHLSSupported"],"sourceRoot":""}