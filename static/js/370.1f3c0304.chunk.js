"use strict";(self.webpackChunkfree_movie=self.webpackChunkfree_movie||[]).push([[370,655],{1370:(t,e,i)=>{i.r(e),i.d(e,{VimeoProvider:()=>o});var s=i(9607),a=i(7108),n=i(7326),r=i(1655);i(5043);const h=["bufferend","bufferstart","durationchange","ended","enterpictureinpicture","error","fullscreenchange","leavepictureinpicture","loaded","playProgress","loadProgress","pause","play","playbackratechange","qualitychange","seeked","seeking","timeupdate","volumechange","waiting"];class o extends n.h{constructor(t,e){super(t),this.b=e,this.$$PROVIDER_TYPE="VIMEO",this.scope=(0,s.createScope)(),this.Ba=new a.zJ(0,0),this.J=null,this.S=null,this.ve=null,this.ia=(0,s.signal)(""),this.uc=(0,s.signal)(!1),this.we=null,this.L=null,this.Zi=null,this.ga=new a.e8(this.lc.bind(this)),this.jd=null,this.cookies=!1,this.title=!0,this.byline=!0,this.portrait=!0,this.color="00ADEF",this.kd=!1}get c(){return this.b.delegate.c}get type(){return"vimeo"}get currentSrc(){return this.L}get videoId(){return this.ia()}get hash(){return this.we}get isPro(){return this.uc()}preconnect(){(0,a.TB)(this.Ob())}setup(){super.setup(),(0,s.effect)(this.xe.bind(this)),(0,s.effect)(this._i.bind(this)),(0,s.effect)(this.$i.bind(this)),this.c("provider-setup",this)}destroy(){this.A(),this.u("destroy")}async play(){const{paused:t}=this.b.$state;return this.J||(this.J=(0,n.H)((()=>{if(this.J=null,t())return"Timed out."})),this.u("play")),this.J.promise}async pause(){const{paused:t}=this.b.$state;return this.S||(this.S=(0,n.H)((()=>{if(this.S=null,!t())return"Timed out."})),this.u("pause")),this.S.promise}setMuted(t){this.u("setMuted",t)}setCurrentTime(t){this.u("seekTo",t),this.c("seeking",t)}setVolume(t){this.u("setVolume",t),this.u("setMuted",(0,s.peek)(this.b.$state.muted))}setPlaybackRate(t){this.u("setPlaybackRate",t)}async loadSource(t){if(!(0,s.isString)(t.src))return this.L=null,this.we=null,void this.ia.set("");const{videoId:e,hash:i}=(0,r.resolveVimeoVideoId)(t.src);this.ia.set(null!==e&&void 0!==e?e:""),this.we=null!==i&&void 0!==i?i:null,this.L=t}xe(){this.A();const t=this.ia();t?(this.tc.set("".concat(this.Ob(),"/video/").concat(t)),this.c("load-start")):this.tc.set("")}_i(){const t=this.ia();if(!t)return;const e=(0,s.deferredPromise)(),i=new AbortController;return this.ve=e,(0,r.getVimeoVideoInfo)(t,i,this.we).then((t=>{e.resolve(t)})).catch((t=>{e.reject()})),()=>{e.reject(),i.abort()}}$i(){const t=this.uc(),{$state:e,qualities:i}=this.b;if(e.canSetPlaybackRate.set(t),i[a.jH.Pd](!t),t)return(0,s.listenEvent)(i,"change",(()=>{var t;if(i.auto)return;const e=null===(t=i.selected)||void 0===t?void 0:t.id;e&&this.u("setQuality",e)}))}Ob(){return"https://player.vimeo.com"}ng(){const{keyDisabled:t}=this.b.$props,{playsInline:e,nativeControls:i}=this.b.$state,s=i();return{title:this.title,byline:this.byline,color:this.color,portrait:this.portrait,controls:s,h:this.hash,keyboard:s&&!t(),transparent:!0,playsinline:e(),dnt:!this.cookies}}lc(){this.u("getCurrentTime")}nc(t,e){if(this.kd&&0===t)return;const{realCurrentTime:i,realDuration:s,paused:a,bufferedEnd:n}=this.b.$state;if(i()===t)return;const r=i();this.c("time-change",t,e),Math.abs(r-t)>1.5&&(this.c("seeking",t,e),!a()&&n()<t&&this.c("waiting",void 0,e)),s()-t<.01&&(this.c("end",void 0,e),this.kd=!0,setTimeout((()=>{this.kd=!1}),500))}pb(t,e){this.c("seeked",t,e)}ub(t){var e;const i=this.ia();null===(e=this.ve)||void 0===e||e.promise.then((e=>{if(!e)return;const{title:i,poster:s,duration:a,pro:n}=e;this.uc.set(n),this.c("title-change",i,t),this.c("poster-change",s,t),this.c("duration-change",a,t),this.ld(a,t)})).catch((()=>{i===this.ia()&&(this.u("getVideoTitle"),this.u("getDuration"))}))}ld(t,e){const{nativeControls:i}=this.b.$state,s=i();this.Ba=new a.zJ(0,t);const n={buffered:new a.zJ(0,0),seekable:this.Ba,duration:t};this.b.delegate.Ha(n,e),s||this.u("_hideOverlay"),this.u("getQualities"),this.u("getChapters")}aj(t,e,i){switch(t){case"getVideoTitle":const t=e;this.c("title-change",t,i);break;case"getDuration":const a=e;this.b.$state.canPlay()?this.c("duration-change",a,i):this.ld(a,i);break;case"getCurrentTime":this.nc(e,i);break;case"getBuffered":(0,s.isArray)(e)&&e.length&&this.og(e[e.length-1][1],i);break;case"setMuted":this.Oa((0,s.peek)(this.b.$state.volume),e,i);break;case"getChapters":this.bj(e);break;case"getQualities":this.md(e,i)}}cj(){for(const t of h)this.u("addEventListener",t)}jb(t){var e;this.ga.aa(),this.c("pause",void 0,t),null===(e=this.S)||void 0===e||e.resolve(),this.S=null}hc(t){var e;this.ga.Ya(),this.c("play",void 0,t),null===(e=this.J)||void 0===e||e.resolve(),this.J=null}dj(t){const{paused:e}=this.b.$state;e()||this.kd||this.c("playing",void 0,t)}og(t,e){const i={buffered:new a.zJ(0,t),seekable:this.Ba};this.c("progress",i,e)}ej(t){this.c("waiting",void 0,t)}fj(t){const{paused:e}=this.b.$state;e()||this.c("playing",void 0,t)}fe(t){const{paused:e}=this.b.$state;e()&&this.c("play",void 0,t),this.c("waiting",void 0,t)}Oa(t,e,i){const s={volume:t,muted:e};this.c("volume-change",s,i)}bj(t){if(this.pg(),!t.length)return;const e=new a.to({kind:"chapters",default:!0}),{realDuration:i}=this.b.$state;for(let a=0;a<t.length;a++){var s;const n=t[a],r=t[a+1];e.addCue(new window.VTTCue(n.startTime,null!==(s=null===r||void 0===r?void 0:r.startTime)&&void 0!==s?s:i(),n.title))}this.jd=e,this.b.textTracks.add(e)}pg(){this.jd&&(this.b.textTracks.remove(this.jd),this.jd=null)}md(t,e){this.b.qualities[a.kW.Ja]=t.some((t=>"auto"===t.id))?()=>this.u("setQuality","auto"):void 0;for(const i of t){if("auto"===i.id)continue;const t=+i.id.slice(0,-1);isNaN(t)||this.b.qualities[a.jH.ea]({id:i.id,width:t*(16/9),height:t,codec:"avc1,h.264",bitrate:-1},e)}this._a(t.find((t=>t.active)),e)}_a(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(!t)return;const i="auto"===t,s=this.b.qualities.getById(t);i?(this.b.qualities[a.kW.Xa](i,e),this.b.qualities[a.jH.fa](void 0,!0,e)):this.b.qualities[a.jH.fa](null!==s&&void 0!==s?s:void 0,!0,e)}gj(t,e,i){switch(t){case"ready":this.cj();break;case"loaded":this.ub(i);break;case"play":this.hc(i);break;case"playProgress":this.dj(i);break;case"pause":this.jb(i);break;case"loadProgress":this.og(e.seconds,i);break;case"waiting":this.fe(i);break;case"bufferstart":this.ej(i);break;case"bufferend":this.fj(i);break;case"volumechange":this.Oa(e.volume,(0,s.peek)(this.b.$state.muted),i);break;case"durationchange":this.Ba=new a.zJ(0,e.duration),this.c("duration-change",e.duration,i);break;case"playbackratechange":this.c("rate-change",e.playbackRate,i);break;case"qualitychange":this._a(e,i);break;case"fullscreenchange":this.c("fullscreen-change",e.fullscreen,i);break;case"enterpictureinpicture":this.c("picture-in-picture-change",!0,i);break;case"leavepictureinpicture":this.c("picture-in-picture-change",!1,i);break;case"ended":this.c("end",void 0,i);break;case"error":this.R(e,i);break;case"seek":case"seeked":this.pb(e.seconds,i)}}R(t,e){var i;("setPlaybackRate"===t.method&&this.uc.set(!1),"play"!==t.method)||(null===(i=this.J)||void 0===i||i.reject(t.message))}ue(t,e){t.event?this.gj(t.event,t.data,e):t.method&&this.aj(t.method,t.value,e)}hd(){}u(t,e){return this.te({method:t,value:e})}A(){this.ga.aa(),this.Ba=new a.zJ(0,0),this.J=null,this.S=null,this.ve=null,this.Zi=null,this.uc.set(!1),this.pg()}}},7326:(t,e,i)=>{i.d(e,{H:()=>n,h:()=>r});var s=i(9607),a=i(7108);function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;const i=(0,s.deferredPromise)();return setTimeout((()=>{const e=t();e&&i.reject(e)}),e),i}class r{constructor(t){this.Mb=t,this.tc=(0,s.signal)(""),this.referrerPolicy=null,t.setAttribute("frameBorder","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),null!==this.referrerPolicy&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.Mb}setup(){(0,s.listenEvent)(window,"message",this.Yi.bind(this)),(0,s.listenEvent)(this.Mb,"load",this.hd.bind(this)),(0,s.effect)(this.Nb.bind(this))}Nb(){const t=this.tc();if(!t.length)return void this.Mb.setAttribute("src","");const e=(0,s.peek)((()=>this.ng()));this.Mb.setAttribute("src",(0,a.xF)(t,e))}te(t,e){var i;a.op||null===(i=this.Mb.contentWindow)||void 0===i||i.postMessage(JSON.stringify(t),null!==e&&void 0!==e?e:"*")}Yi(t){var e;const i=this.Ob();if((null===t.source||t.source===(null===(e=this.Mb)||void 0===e?void 0:e.contentWindow))&&(!(0,s.isString)(i)||i===t.origin)){try{const e=JSON.parse(t.data);return void(e&&this.ue(e,t))}catch(a){}t.data&&this.ue(t.data,t)}}}},1655:(t,e,i)=>{i.d(e,{getVimeoVideoInfo:()=>h,resolveVimeoVideoId:()=>r});const s=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,a=new Map,n=new Map;function r(t){const e=t.match(s);return{videoId:null===e||void 0===e?void 0:e[1],hash:null===e||void 0===e?void 0:e[2]}}async function h(t,e,i){if(a.has(t))return a.get(t);if(n.has(t))return n.get(t);let s="https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/".concat(t);i&&(s=s.concat("?h=".concat(i)));const r=window.fetch(s,{mode:"cors",signal:e.signal}).then((t=>t.json())).then((e=>{var i,s,n;const r=null===e||void 0===e||null===(i=e.thumbnail_url)||void 0===i||null===(i=i.match(/vimeocdn.com\/video\/(.*)?_/))||void 0===i?void 0:i[1],h=r?"https://i.vimeocdn.com/video/".concat(r,"_1920x1080.webp"):"",o={title:null!==(s=null===e||void 0===e?void 0:e.title)&&void 0!==s?s:"",duration:null!==(n=null===e||void 0===e?void 0:e.duration)&&void 0!==n?n:0,poster:h,pro:"basic"!==e.account_type};return a.set(t,o),o})).finally((()=>n.delete(t)));return n.set(t,r),r}}}]);
//# sourceMappingURL=370.1f3c0304.chunk.js.map